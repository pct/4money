{% extends '_layout.html' %}

{% block head %}
{% include '_header.html' %}
<link rel="stylesheet" href="{{doc_root}}/css/page.css" type="text/css" />
<link rel="stylesheet" href="{{doc_root}}/css/table_jui.css" type="text/css" />
<link rel="stylesheet" href="{{doc_root}}/css/flick/jquery-ui.css" type="text/css" />
<script type="text/javascript" src="{{doc_root}}/js/jquery-ui.js"></script>
<script type="text/javascript" src="{{doc_root}}/js/jquery.dataTables.min.js"></script>
{% endblock %}

{% block content %}

<article class="module width_full">
    <header>
        <h3>報價單列表</h3>
    </header>
    <div class="module_content">
        <table id="quotation_list_table" cellpadding="0" cellspacing="0" border="0" class="display" style="width:100%;">
            <thead>
                <tr>
                    <th>編號</th>
                    <th>訂單名稱</th>
                    <th>客戶資料</th>
                    <th>未稅</th>
                    <th>總價</th>
                    <th>狀態</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% for quotation in quotations %}
                <tr>
                    <td>{{quotation.quotation_id}}</td>
                    <td>
                        <a class="button" href="{{doc_root}}/quotation_view/{{quotation.quotation_id}}"><span class="book icon"></span>{{quotation.quotation_name}}</a>
                    </td>
                    <td>{{quotation.customer_info}}</td>
                    <td>{{quotation.sub_total_price}}</td>
                    <td>{{quotation.total_price}}</td>
                    <td>{{quotation_status_words[quotation.status]}}</td>
                    <td>
                        <a class="left button" href="quotation_view/{{quotation.quotation_id}}"><span class="book icon"></span>查看</a><a class="middle button" href="quotation_edit/{{quotation.quotation_id}}"><span class="pen icon"></span>編輯</a><a class="right button" href="quotation_status_update/{{quotation.quotation_id}}"><span class="cog icon"></span>更新狀態</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div> 
</article>

<script type="text/javascript">
$(function() {
    $('#quotation_list_table').dataTable({"bJQueryUI": true, "iDisplayLength": 15, "aLengthMenu": [[15, 50, -1], [15, 50, "All"]], "sPaginationType": "full_numbers", "oLanguage":{
        "sUrl": "js/datatables_tw.txt"
        },
        "aoColumns": [{"asSorting": ["desc"]}, null, null, null, null, null, null]
    });
});
</script>

{% endblock %}
